pipeline {
    agent none
    stages {
	stage('Test docker') {
	    agent any
	    steps {
		sh 'printenv'
		sh 'ls -l /usr/local/bin'
	    }
	}
        stage('Build') {
            agent {
                docker {
                    image "maven:3-jdk-8"
                }
            }
            steps {
		sh 'printenv'
		sh "ls -l /usr/local/bin"
                sh "mvn install"
            }
        }
    }
}
